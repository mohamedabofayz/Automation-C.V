<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
  <style>
    body {
      font-family: "Cairo", sans-serif;
      background: #f7f9fc;
      margin: 20px;
    }
    .btn {
      padding: 10px 20px;
      background: #2E86C1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
    }
    .btn:hover { background: #1B4F72; }
    .cv-preview {
      display: none;
      margin-top: 20px;
      padding: 20px;
      border-radius: 12px;
      background: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .cv-header {
      display: flex;
      align-items: center;
      gap: 20px;
      border-bottom: 2px solid #eee;
      padding-bottom: 15px;
    }
    .cv-header img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #2E86C1;
    }
    .cv-header .info h2 { margin: 0; }
    .cv-section {
      margin: 20px 0;
    }
    .cv-section h3 {
      color: #2E86C1;
      margin-bottom: 8px;
    }
    ul { padding-left: 20px; }
    
    /* --- Ù‚ÙˆØ§Ù„Ø¨ Ù…Ø®ØªÙ„ÙØ© --- */
    .theme-default { background: white; color: black; }
    .theme-dark { background: #222; color: white; }
    .theme-dark h3 { color: #F39C12; }
    .theme-elegant { background: #fdfaf6; border-left: 5px solid #8e44ad; }
    .theme-elegant h3 { color: #8e44ad; }
  </style>
</head>
<body>

<h1>Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ğŸ¤–</h1>

<input type="file" id="profileImage" accept="image/*" class="btn">
<br><br>

<button class="btn" onclick="generateAICV()">Ø¥Ù†Ø´Ø§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
<button class="btn" onclick="changeTheme('theme-default')">Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
<button class="btn" onclick="changeTheme('theme-dark')">Ù‚Ø§Ù„Ø¨ Ø¯Ø§ÙƒÙ†</button>
<button class="btn" onclick="changeTheme('theme-elegant')">Ù‚Ø§Ù„Ø¨ Ø£Ù†ÙŠÙ‚</button>

<div class="cv-preview" id="cvPreview">
  <div id="cvContent"></div>
</div>

<script>
const API_TOKEN = "Ø¶Ø¹_Ø§Ù„ØªÙˆÙƒÙ†_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ";

let currentTheme = "theme-default";
let profileImageURL = "";

document.getElementById("profileImage").addEventListener("change", (event) => {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      profileImageURL = e.target.result;
    };
    reader.readAsDataURL(file);
  }
});

function changeTheme(theme) {
  currentTheme = theme;
  document.getElementById("cvPreview").className = `cv-preview ${theme}`;
}

async function generateAICV() {
  const prompt = `
Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³ÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø§Ù„ÙŠØ©.
Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© Ù…Ù†Ø¸Ù…Ø© Ø¨ØµÙŠØºØ© JSON ÙÙ‚Ø· Ù„Ø´Ø®Øµ Ø§ÙØªØ±Ø§Ø¶ÙŠ.
âš¡ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
{
  "Personal_Info": {
    "Name": "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",
    "JobTitle": "Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ",
    "Email": "Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„",
    "Phone": "Ø§Ù„Ù‡Ø§ØªÙ"
  },
  "Summary": "Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø®ØµÙŠ",
  "Experience": ["Ø®Ø¨Ø±Ø© 1", "Ø®Ø¨Ø±Ø© 2"],
  "Education": ["Ø´Ù‡Ø§Ø¯Ø© 1", "Ø´Ù‡Ø§Ø¯Ø© 2"],
  "Skills": ["Ù…Ù‡Ø§Ø±Ø© 1", "Ù…Ù‡Ø§Ø±Ø© 2"],
  "Achievements": ["Ø¥Ù†Ø¬Ø§Ø² 1", "Ø¥Ù†Ø¬Ø§Ø² 2"]
}
`;

  try {
    const response = await fetch(`https://text.pollinations.ai/openai?token=${API_TOKEN}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ messages: [{ role: "user", content: prompt }] })
    });

    const raw = await response.json();
    const content = raw?.choices?.[0]?.message?.content || "";
    const clean = content.replace(/```json|```/g, "").trim();
    const cvData = JSON.parse(clean);

    let html = `
      <div class="cv-header">
        ${profileImageURL ? `<img src="${profileImageURL}" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©">` : ""}
        <div class="info">
          <h2>${cvData.Personal_Info.Name}</h2>
          <div class="job-title">${cvData.Personal_Info.JobTitle || ""}</div>
          <div class="contact-info">
            <p>ğŸ“§ ${cvData.Personal_Info.Email}</p>
            <p>ğŸ“ ${cvData.Personal_Info.Phone}</p>
          </div>
        </div>
      </div>

      <div class="cv-section">
        <h3>ğŸ’¡ Ø§Ù„Ù…Ù„Ø®Øµ</h3>
        <p>${cvData.Summary || ""}</p>
      </div>

      <div class="cv-section">
        <h3>ğŸ’¼ Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h3>
        <ul>${(cvData.Experience || []).map(exp => `<li>${exp}</li>`).join("")}</ul>
      </div>

      <div class="cv-section">
        <h3>ğŸ“ Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h3>
        <ul>${(cvData.Education || []).map(edu => `<li>${edu}</li>`).join("")}</ul>
      </div>

      <div class="cv-section">
        <h3>ğŸ› ï¸ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h3>
        <ul>${(cvData.Skills || []).map(skill => `<li>${skill}</li>`).join("")}</ul>
      </div>

      <div class="cv-section">
        <h3>ğŸ† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</h3>
        <ul>${(cvData.Achievements || []).map(a => `<li>${a}</li>`).join("")}</ul>
      </div>
    `;

    document.getElementById("cvContent").innerHTML = html;
    document.getElementById("cvPreview").style.display = "block";
    changeTheme(currentTheme);

  } catch (err) {
    alert("âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: " + err.message);
  }
}
</script>

</body>
</html>