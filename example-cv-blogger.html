<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>مولد السيرة الذاتية بالذكاء الاصطناعي</title>
  <style>
    body {
      font-family: "Cairo", sans-serif;
      background: #f7f9fc;
      margin: 20px;
    }
    .btn {
      padding: 10px 20px;
      background: #2E86C1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
    }
    .btn:hover { background: #1B4F72; }
    .cv-preview {
      display: none;
      margin-top: 20px;
      padding: 20px;
      border-radius: 12px;
      background: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .cv-header {
      display: flex;
      align-items: center;
      gap: 20px;
      border-bottom: 2px solid #eee;
      padding-bottom: 15px;
    }
    .cv-header img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #2E86C1;
    }
    .cv-header .info h2 { margin: 0; }
    .cv-section {
      margin: 20px 0;
    }
    .cv-section h3 {
      color: #2E86C1;
      margin-bottom: 8px;
    }
    ul { padding-left: 20px; }
    
    /* --- قوالب مختلفة --- */
    .theme-default { background: white; color: black; }
    .theme-dark { background: #222; color: white; }
    .theme-dark h3 { color: #F39C12; }
    .theme-elegant { background: #fdfaf6; border-left: 5px solid #8e44ad; }
    .theme-elegant h3 { color: #8e44ad; }
  </style>
</head>
<body>

<h1>مولد السيرة الذاتية بالذكاء الاصطناعي 🤖</h1>

<input type="file" id="profileImage" accept="image/*" class="btn">
<br><br>

<button class="btn" onclick="generateAICV()">إنشاء تلقائي</button>
<button class="btn" onclick="changeTheme('theme-default')">القالب الافتراضي</button>
<button class="btn" onclick="changeTheme('theme-dark')">قالب داكن</button>
<button class="btn" onclick="changeTheme('theme-elegant')">قالب أنيق</button>

<div class="cv-preview" id="cvPreview">
  <div id="cvContent"></div>
</div>

<script>
const API_TOKEN = "ضع_التوكن_الخاص_بك";

let currentTheme = "theme-default";
let profileImageURL = "";

document.getElementById("profileImage").addEventListener("change", (event) => {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      profileImageURL = e.target.result;
    };
    reader.readAsDataURL(file);
  }
});

function changeTheme(theme) {
  currentTheme = theme;
  document.getElementById("cvPreview").className = `cv-preview ${theme}`;
}

async function generateAICV() {
  const prompt = `
أنت خبير في كتابة السير الذاتية باحترافية عالية.
قم بإنشاء سيرة ذاتية منظمة بصيغة JSON فقط لشخص افتراضي.
⚡ التنسيق المطلوب:
{
  "Personal_Info": {
    "Name": "الاسم الكامل",
    "JobTitle": "المسمى الوظيفي",
    "Email": "الايميل",
    "Phone": "الهاتف"
  },
  "Summary": "الملخص الشخصي",
  "Experience": ["خبرة 1", "خبرة 2"],
  "Education": ["شهادة 1", "شهادة 2"],
  "Skills": ["مهارة 1", "مهارة 2"],
  "Achievements": ["إنجاز 1", "إنجاز 2"]
}
`;

  try {
    const response = await fetch(`https://text.pollinations.ai/openai?token=${API_TOKEN}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ messages: [{ role: "user", content: prompt }] })
    });

    const raw = await response.json();
    const content = raw?.choices?.[0]?.message?.content || "";
    const clean = content.replace(/```json|```/g, "").trim();
    const cvData = JSON.parse(clean);

    let html = `
      <div class="cv-header">
        ${profileImageURL ? `<img src="${profileImageURL}" alt="الصورة الشخصية">` : ""}
        <div class="info">
          <h2>${cvData.Personal_Info.Name}</h2>
          <div class="job-title">${cvData.Personal_Info.JobTitle || ""}</div>
          <div class="contact-info">
            <p>📧 ${cvData.Personal_Info.Email}</p>
            <p>📞 ${cvData.Personal_Info.Phone}</p>
          </div>
        </div>
      </div>

      <div class="cv-section">
        <h3>💡 الملخص</h3>
        <p>${cvData.Summary || ""}</p>
      </div>

      <div class="cv-section">
        <h3>💼 الخبرات العملية</h3>
        <ul>${(cvData.Experience || []).map(exp => `<li>${exp}</li>`).join("")}</ul>
      </div>

      <div class="cv-section">
        <h3>🎓 التعليم</h3>
        <ul>${(cvData.Education || []).map(edu => `<li>${edu}</li>`).join("")}</ul>
      </div>

      <div class="cv-section">
        <h3>🛠️ المهارات</h3>
        <ul>${(cvData.Skills || []).map(skill => `<li>${skill}</li>`).join("")}</ul>
      </div>

      <div class="cv-section">
        <h3>🏆 الإنجازات</h3>
        <ul>${(cvData.Achievements || []).map(a => `<li>${a}</li>`).join("")}</ul>
      </div>
    `;

    document.getElementById("cvContent").innerHTML = html;
    document.getElementById("cvPreview").style.display = "block";
    changeTheme(currentTheme);

  } catch (err) {
    alert("⚠️ خطأ في الاتصال بالذكاء الاصطناعي: " + err.message);
  }
}
</script>

</body>
</html>